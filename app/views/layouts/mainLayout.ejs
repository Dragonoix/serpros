<!DOCTYPE html>
<html class="loading" lang="en" data-textdirection="ltr">
<!-- BEGIN: Head-->

<head>
	<% include ../partials/head.ejs%>
</head>
<!-- END: Head-->

<!-- BEGIN: Body-->

<body class="vertical-layout vertical-menu-modern  navbar-floating footer-static  " data-open="click" data-menu="vertical-menu-modern" data-col="">

    <!-- BEGIN: Header-->
    <% include ../partials/topnavbar.ejs%>
    <!-- END: Header-->


    <!-- BEGIN: Main Menu-->
    <% include ../partials/sidemenu.ejs%>
    <!-- END: Main Menu-->

    <!-- BEGIN: Vendor JS-->
    <script src="/app-assets/vendors/js/vendors.min.js"></script>
    <!-- BEGIN Vendor JS-->

    <!-- BEGIN: Page Vendor JS-->
    <script src="/app-assets/vendors/js/forms/select/select2.full.min.js"></script>
    <script src="/app-assets/vendors/js/extensions/sweetalert2.all.min.js"></script>
    <script src="/app-assets/vendors/js/forms/validation/jquery.validate.min.js"></script>
    <script src="/app-assets/vendors/js/forms/cleave/cleave.min.js"></script>
    <script src="/app-assets/vendors/js/forms/cleave/addons/cleave-phone.us.js"></script>
    <script src="/app-assets/vendors/js/charts/apexcharts.min.js"></script>
    <script src="/app-assets/vendors/js/extensions/toastr.min.js"></script>
    
    <script src="/app-assets/vendors/js/tables/datatable/jquery.dataTables.min.js"></script>
    <script src="/app-assets/vendors/js/tables/datatable/dataTables.bootstrap5.min.js"></script>
    <script src="/app-assets/vendors/js/tables/datatable/dataTables.responsive.min.js"></script>
    <script src="/app-assets/vendors/js/tables/datatable/responsive.bootstrap5.js"></script>
    <script src="/app-assets/vendors/js/tables/datatable/datatables.buttons.min.js"></script>
    <script src="/app-assets/vendors/js/tables/datatable/jszip.min.js"></script>
    <script src="/app-assets/vendors/js/tables/datatable/pdfmake.min.js"></script>
    <script src="/app-assets/vendors/js/tables/datatable/vfs_fonts.js"></script>
    <script src="/app-assets/vendors/js/tables/datatable/buttons.html5.min.js"></script>
    <script src="/app-assets/vendors/js/tables/datatable/buttons.print.min.js"></script>
    <script src="/app-assets/vendors/js/tables/datatable/dataTables.rowGroup.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment-with-locales.min.js" integrity="sha512-42PE0rd+wZ2hNXftlM78BSehIGzezNeQuzihiBCvUEB3CVxHvsShF86wBWwQORNxNINlBPuq7rG4WWhNiTVHFg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.2/additional-methods.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="https://cdn.quilljs.com/1.3.6/quill.min.js" type="text/javascript"></script>

    <!-- END: Page Vendor JS-->
    <script src="/js/themeJS/common.js"></script>
    <script src="/js/common.js"></script>
    <script src="/js/quill-editor.js"></script>
    <!-- <script src="/js/web-push.js"></script> -->
    <script src="/form-controls/validation.js"></script>
    
    <img src="/images/loader.gif" id="gif" class="loader_style" >
    <!-- BEGIN: Content-->
    <%- body %>
    <!-- END: Content-->
    <input type="hidden" id="adminThemeConfig" value="<%= JSON.stringify(adminThemeConfig) %>">

    <div class="sidenav-overlay"></div>
    <div class="drag-target"></div>

    <!-- BEGIN: Footer-->
    <% include ../partials/footer.ejs%>
    <button class="btn btn-primary btn-icon scroll-top" type="button"><i data-feather="arrow-up"></i></button>
    <!-- END: Footer-->

    <!-- BEGIN: Theme JS-->
    <script src="/app-assets/js/core/app-menu.js"></script>
    <script src="/app-assets/js/core/app.js"></script>
    
    <!-- END: Theme JS-->
    <script>
        // Handle Dirty Form
        // let allow_to_navigate = true;

        // $('form').on('change', function() {
        //     allow_to_navigate = false;
        // });

        // $('form').submit(function() {
        //     allow_to_navigate = true;
        //     setTimeout(()=>{
        //         let error = document.getElementsByClassName('error');
        //         if (!error.length) {
        //             $(".app-content, nav, .main-menu").css("filter", "blur(5px)");
        //             $('#gif').css('visibility', 'visible');
        //         } else {
        //             allow_to_navigate = false;
        //         }
        //     }, 100);
        // });

        // $("button[type='reset']").on("click", function() {
        //     allow_to_navigate = true;
        // });

        // let current__active_menu = $('li').find('.active');
        // if ($(document).find("form").length) {
        //     window.addEventListener('beforeunload', function (event) {
        //         if (!allow_to_navigate) {
        //             event.preventDefault();
        //             event.returnValue = 'You have unsaved changes. Are you sure you want to navigate anyway?';
        //         }
        //     });

        //     $('li').on('click', function () {
        //         setTimeout(function () {
        //             $('li').removeClass('active');
        //             if ($(current__active_menu).length) {
        //                 for (let i=0;i<$(current__active_menu).length;i++) {
        //                     $($(current__active_menu)[i]).addClass('active');
        //                 }
        //             }
        //         }, 10);
        //     });
        // }
        // // Handle Dirty Form
    </script>

    <!-- DISPLAY SUCCESS MESSAGE -->
	<% if (!(_.isEmpty(messages))) { 
        if(_.keys(messages) == 'success') {
    %>
    <script type="text/javascript">
        let isRtl = $('html').attr('data-textdirection') === 'rtl';
        toastr['success'](
        '<%=messages.success[0] %>',
        'Success!',
        {
            closeButton: true,
            tapToDismiss: false,
            rtl: isRtl
        }
        );
    </script>
    <% 
        }
    } 
    %>
    <!-- DISPLAY ERROR MESSAGE -->
    <% if (!(_.isEmpty(messages))) {
        if(_.keys(messages) == 'error') {
    %>
    <script type="text/javascript">
        let isRtl2 = $('html').attr('data-textdirection') === 'rtl';
        toastr['error'](
        '<%=messages.error[0] %>',
        'Error!',
        {
            closeButton: true,
            tapToDismiss: false,
            rtl: isRtl2
        }
        );
    </script>
    <% 
        }
    } 
    %>
</body>
<!-- END: Body-->

</html>